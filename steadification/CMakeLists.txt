set(DATASET_DIR "/home/steve/vectorfield_datasets" CACHE PATH "Path to datasets")
add_compile_definitions(DATASET_DIR="${DATASET_DIR}")

function (copy FILE)
  configure_file(${CMAKE_CURRENT_SOURCE_DIR}/${FILE} 
    ${CMAKE_CURRENT_BINARY_DIR}/${FILE} COPYONLY)
endfunction (copy)

configure_file(${CMAKE_CURRENT_SOURCE_DIR}/viridis_color_scale.png 
  ${CMAKE_CURRENT_BINARY_DIR}/color_scale.png COPYONLY)
copy(runner.sh)
#copy(pathline_image_generator)
copy(color_lic.comp)
copy(lic.comp)
copy(streamsurface_vectorfield.frag)
copy(layouts.glsl)
copy(streamsurface.glsl)
copy(node.glsl)
copy(mesh_viewer.vert)
copy(mesh_viewer.frag)
copy(linked_list_to_head_vectors.comp)
copy(reduce.comp)
copy(weight.comp)
copy(screenspacetex.frag)
copy(streamsurface.vert)
copy(streamsurface_to_linked_list.frag)
copy(streamsurface_counter.frag)
copy(streamsurface_uv.frag)
copy(streamsurface_tau.frag)
copy(viewport_show.vert)
copy(viewport_show.frag)
copy(line.frag)
copy(line.vert)
copy(streamsurface_white.frag)
copy(spatial_coverage.comp)

set(HDF5_LIBS -lhdf5 -lhdf5_cpp -lhdf5_hl)

find_package(yavin REQUIRED)
add_executable (steadification main.cpp renderers.cpp shaders.cpp steadification.cpp datasets.cpp)
target_link_libraries(steadification tatooine yavin)
target_compile_features(steadification PUBLIC cxx_std_17)
target_compile_options(steadification PRIVATE
  -Wall -Wextra -pedantic -Wno-missing-braces -Wno-unused-lambda-capture)
